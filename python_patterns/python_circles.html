<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta name="Author" content="John Whitehouse">
<meta name="KeyWords" content="Python Patterns Animated GIF Bitmap">
<title>Python Circle Patterns</title>

<link rel="StyleSheet" href="http://www.eddaardvark.co.uk/jw.css" type="text/css" media="screen">
<script type="text/javascript" src="http://www.eddaardvark.co.uk/john.js"> </script>

<script>
    //-------------------------------------------------------------
    OnStart = function ()
    {
        var links = MakeButtons ();
        var item = document.getElementById("links_go_here");
        item.innerHTML = links;
    }
    //-------------------------------------------------------------
    Show = function (what)
    {
        window.location = what;
    }
</script>

</head>

<!-- The body -->

<body onload="OnStart()">



<!-- Banner -->

  <div style="margin: auto; width: 1024px;">
     <button style="width: 180px;" class="banner clickable" onclick="Show('http://www.eddaardvark.co.uk')">
        <p> <img border="0" src="http://www.eddaardvark.co.uk/images/home.png">
        <p> <strong>Home page</strong>
     </button>

     <button class="banner">
      <h1> Python Generated Circle Patterns </h1>
     </button>

     <!-- Ads -->

      <button style="width: 260px;" class="banner">
        <script type="text/javascript"><!--
          google_ad_client = "ca-pub-3534237235440125";
          /* Small Square */
          google_ad_slot = "0024655068";
          google_ad_width = 200;
          google_ad_height = 200;
          //-->
        </script>
        <script type="text/javascript"
          src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
        </script>
        <p> <strong>Advertisement</strong> <p>
      </button>
    </div>

<!-- Content -->

    <div class="in2 box">

    <h2>Contents</h2>
    <ul class="in3">
      <li> <a href="#Download"> Download</a>  </li>
      <li> <a href="#Explanation"> Explanation</a> </li>
      <li> <a href="#related paterns">Related Paterns</a></li>
      <li> <a href="#drawXYSequence"> XY Sequences</a> </li>
      <li> <a href="#example"> The 'example' function</a> </li>
      <li> <a href="#The CirclePattern class">The CirclePattern Class</a> </li>
      <li> <a href="#Supplied functions">Supplied Functions</a> </li>
    </ul>
    </div>

<!-- Download -->

    <div class="in2 box">

    <h2><a name="Download">Download</a></h2>

    <p>CirclePattern is implemented in the module <a href="code/CirclePattern.py">CirclePattern.py</a></p>

    </div>

    <!-- Explanation -->

    <div class="in2 box">

    <h2><a name="Explanation">Explanation</a></h2>
    <p>The circle pattern is generated by trying to render the surface <b>
    z&nbsp;=&nbsp;k(x<span class="superscript">2</span>&nbsp;+&nbsp;y<span class="superscript">2</span>)</b>
    using a square
    grid and a finite number of colours. For very small pixels and a large range of
    colours you get some quite smooth circles.</p>

    <p>

    <table border="1" cellpadding="8" cellspacing="1">
      <tr>
        <td><img border="0" src="images/smooth.gif" width="240" height="160" alt="Smooth"></td>
        <td>This was created using the script
          <p class="code white simpleborder padding">
          import CirclePattern<br>
          import ColourMap<br>
          pat = CirclePattern.CirclePattern()<br>
          pat.setSize (240,160)<br>
          pat.createColourMap(ColourMap.blue,ColourMap.cyan,64)<br>
          pat.z_factor = 0.01<br>
          pat.draw()<br>
          pat.bitmap.writeFile(pat.path+'smooth.bmp')
          </p></td>
      </tr>
    </table>
    <p>'z_factor' is the term that appears as 'k' in the original equation. Reducing the number of colours while keeping everything else the same
    produces a more ragged pattern and interesting interference effects start
    appearing, producing the ghost circles around the central one, as can be seen
    in the next image.
    <p>


    <table border="1" cellpadding="8" cellspacing="1">
      <tr>
        <td><img border="0" src="images/smooth2.gif" width="240" height="160" alt="Smooth"></td>
        <td>This was created using the script
          <p class="code white simpleborder padding">
          import CirclePattern<br>
          import ColourMap<br>
          pat = CirclePattern.CirclePattern()<br>
          pat.setSize (240,160)<br>
          pat.createColourMap(ColourMap.blue,ColourMap.cyan,8)<br>
          pat.z_factor = 0.01<br>
          pat.draw()<br>
          pat.bitmap.writeFile(pat.path+'smooth2.bmp')
          </p></td>
      </tr>
    </table>
    <p>Increasing the 'z' factor (k) also tightens the circles and more ghost
    effects appear as can be seen in this animation.</p>
    <p>


    <table border="1" cellpadding="8" cellspacing="1">
      <tr>
        <td><img border="0" src="images/seq1.gif" width="240" height="160" alt="Z"></td>
        <td>This was created using the script
              <p class="code white simpleborder padding">
          import CirclePattern<br>
          import ColourMap<br>
          pat = CirclePattern.CirclePattern()<br>
          pat.setSize (240,160)<br>
          pat.createColourMap(ColourMap.blue,ColourMap.cyan,8)<br>
          pat.filename = 'sequence'<br>
          pat.drawZSequence(0.01,0.005,1,20)
          </p></td>
      </tr>
    </table>


    <p>The script creates a sequence of 20 images with z_factors [0.01, 0.015, 0.02, ...]
    and filenames ['sequence00001.bmp', ...]. I
    converted these to GIFs using Paintshop Pro giving ['sequence00001.gif', ...] and then
    animated them using the following python script;</p>

    <p class="code white simpleborder padding">
      import MakeFileList<br>
      import GIFAnimator<br>
      flist=MakeFileList.MakeFileList(pat.path, 'sequence', 'gif', 1, 20)&nbsp;<br>
      gif=GIFAnimator.buildFromFiles(flist)<br>
      gif.writeToFile(pat.path+'seq1.gif')
    <p>

    These examples are small to save bandwidth, you can create
    larger images and longer animations for yourself.</p>

    </div>

<!-- Related patterns -->

    <div class="in2 box">

    <h2><a name="related paterns">Related Paterns</a></h2>
    <p>
        If you examine the circle pattern code you will see that the CirclePattern
    <p class="code white simpleborder padding">
       self.fun = self.circle<br>
    <p>
        and that the code that calculates the pattern calls 'fun' rather than
    'circle'. You can use this to quickly change the equation that is drawn.
    The functions available are listed in the <a href="#Supplied functions">Supplied
    Functions</a> section but it is easy to add new ones. The function 'anticircle'
    is shown in the next example.</p>


    <table border="1" cellpadding="8" cellspacing="1">
      <tr>
        <td><img border="0" src="images/anticircle.gif" width="240" height="160" alt="Anticircle"></td>
        <td>
          <p>Script:
          <p class="code white simpleborder padding">

          import CirclePattern<br>
          import ColourMap<br>
          pat = CirclePattern.CirclePattern()<br>
          pat.setSize (240,160)<br>
          pat.createColourMap(ColourMap.blue,ColourMap.cyan,8)<br>
          pat.z_factor = 0.01<br>
          pat.fun=pat.anticircle<br>
          pat.draw()<br>
          pat.bitmap.writeFile(pat.path+'smooth2.bmp')
          </td>
      </tr>
    </table>

    </div>

    <!-- XY Sequence -->

    <div class="in2 box">

    <h2><a name="drawXYSequence"> Drawing the XY Sequence</a></h2>
    <p>
        The function

    <p class="code white simpleborder padding">

        drawXYSequence (self, xy0, xyinc, start, num):
    <p>
        creates a sequence of patterns by varying xy_factor.
        You must set pat.fun to be 'xyfun' to use this.
    <p>
        <a href="xyfun.html">Click here to see some examples.</a>

    </div>

    <!-- Example -->

    <div class="in2 box">

    <h2><a name="example">The 'example' function</a></h2>

    <p>
        The CirclePattern module includes an example function which can be used to
        create a few example patterns.&nbsp; This is easily edited if you want to experiment.
        It is accessed using script like</p>
    <p class="code white simpleborder padding">

         import CirclePattern<br>
         pat=CirclePattern.example(1)

    <p>
        which will create a file called 'example1.bmp'. There are six basic examples (1-6)
        and a example sequence (1000). You can generate all the standard examples in one
        go with the script.</p>

    <p class="code white simpleborder padding">
        import CirclePattern<br>
        for i in range (1,7):<br>
        &nbsp;&nbsp;&nbsp; CirclePattern.example(i)

    <p>
        They generate larger versions of the following patterns.<br>

    <p>
        <img border="1" src="images/TN_example1.gif" alt="Example 1">
        <img border="1" src="images/TN_example2.gif" alt="Example 2">
        <img border="1" src="images/TN_example3.gif" alt="Example 3">
        <img border="1" src="images/TN_example4.gif" alt="Example 4">
        <img border="1" src="images/TN_example5.gif" alt="Example 5">
        <img border="1" src="images/TN_example6.gif" alt="Example 6">

    </div>

    <!-- Circle Pattern Class -->

    <div class="in2 box">

    <h2><a name="The CirclePattern class">The CirclePattern Class</a></h2>
    <p>Hopefully the code is commented well enough for you to follow it and I've
    tried to avoid complicated statements. I'll just explain the class member
    variables here;</p>

    <p class="code white simpleborder padding">

    <table>
      <tr>
        <td class="code">self.width&nbsp;=&nbsp;400</td>
        <td class="code">The width of the pattern in cells. The width in pixels will be this
          value multiplied by self.blocksize</td>
      </tr>
      <tr>
        <td class="code">self.height&nbsp;=&nbsp;300</td>
        <td class="code">The height of the pattern in cells. The height in pixels will be this
          value multiplied by        self.blocksize</td>
      </tr>
      <tr>
        <td class="code">self.colour_map&nbsp;=&nbsp;[black,white]</td>
        <td class="code">The colour map. A list of colours. The createColourMap can be used to
          initialise this to a range of colours or you can build up the map from
          individual colours in any pattern you like.</td>
      </tr>
      <tr>
        <td class="code">        self.z_factor&nbsp;=&nbsp;1e-3</td>
        <td class="code">The vakue of 'k' in the various equations.</td>
      </tr>
      <tr>
        <td class="code">        self.xy_factor&nbsp;=&nbsp;0</td>
        <td class="code">The value of 'k<span class="subscript">2</span>'
        in the various equations.</td>
      </tr>
      <tr>
        <td class="code">self.path&nbsp;=&nbsp;'c:\\python23\\work\\'</td>
        <td class="code">The folder where the output files are saved.</td>
      </tr>
      <tr>
        <td class="code">        self.filename&nbsp;=&nbsp;'circle'</td>
        <td class="code">The name part of an output file. The final name will be<br>
          <br>
          self.path+self.filename+index+'.bmp', where 'index' is the file number.</td>
      </tr>
      <tr>
        <td class="code">        self.blocksize&nbsp;=&nbsp;1</td>
        <td class="code">The size of the cells in the drawing. They are always square.</td>
      </tr>
      <tr>
        <td class="code">        self.fun&nbsp;=&nbsp;self.circle</td>
        <td class="code">The function to use to calculate the pattern.</td>
      </tr>
    </table>

    </div>

    <!-- Supplied Functions -->

    <div class="in2 box">

    <h2><a name="Supplied functions">Supplied Functions</a></h2>
    <p>The following functions are supplied with the code. Others can easily be
    added.</p>

    <p class="code white simpleborder padding">

    <table>
      <tr>
        <td class="code"> circle (default)</td>
        <td class="code">&nbsp;</td>
        <td class="code">z_factor * (x * x + y * y)</td>
      </tr>
      <tr>
        <td class="code"> anticircle&nbsp;</td>
        <td class="code"></td>
        <td class="code">z_factor * (x * x - y * y)</td>
      </tr>
      <tr>
        <td class="code"> xyfun&nbsp;</td>
        <td class="code"></td>
        <td class="code">z_factor * (x * x + xy_factor * x * y + y * y)</td>
      </tr>
      <tr>
        <td class="code">x3y3</td>
        <td class="code"></td>
        <td class="code">z_factor * (x * x * x + y * y * y)</td>
      </tr>
      <tr>
        <td class="code">x4y4</td>
        <td class="code"></td>
        <td class="code">z_factor * (x * x * x * x + y * y * y * y)</td>
      </tr>
      <tr>
        <td class="code"> x3y3_xy</td>
        <td class="code"></td>
        <td class="code">z_factor * (x * x * x + y * y * y) / (x * y)</td>
      </tr>
      <tr>
        <td class="code"> xpy_xmy</td>
        <td class="code"></td>
        <td class="code">z_factor * (x + y) / (x - y)</td>
      </tr>
    </table>

    <p>The equations with a division will return 0 if the denominator is 0.</p>

    </div>


<!-- Generic links -->

   <div class="in2 box">
      <h2> Other pages </h2>
      <p><span id="links_go_here">&nbsp;</span></p>

   </div>

<!-- Copyright -->

   <p class="small"> (c) John Whitehouse 2011 - 2017 <p>


<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>

<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-8112879-1"); pageTracker._trackPageview();
</script>

</body>
</html>


